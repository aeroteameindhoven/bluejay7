<?xml version="1.0"?>
<launch>
    <arg name="map" default="$(find bluejay_gazebo)/worlds/maps/willow_full.yaml"/>

    <!-- Launch mavros + gazebo + px4 -->
    <include file="$(find bluejay_gazebo)/launch/bluejay_gazebo.launch"></include>

    <node pkg="map_server" type="map_server" name="map_server" args ="$(arg map)"/>

    <!-- Launch static_transform_publisher -->
    <node pkg="tf" type="static_transform_publisher" name="laser_base_link" args="0 0 0 3.14159 3.14159 0 base_link_frd /rplidar_link 30"/>
    <node pkg="tf" type="static_transform_publisher" name="map_to_odom" args="0 0 0 0 0 0 map /odom 30"/>
    <node pkg="tf" type="static_transform_publisher" name="odom_to_baselink" args="0 0 0 0 0 0 odom /base_link 30"/> 

    <!-- Launch rviz -->
    <node type="rviz" name="rviz" pkg="rviz" args="-d $(find bluejay_gazebo)/resource/bluejay_rviz.rviz" />

    <include file="$(find bluejay_actionlibs)/launch/action.launch"></include>
</launch>
